**Resumo Completo da Aula: Docker Compose com PostgreSQL e Persist√™ncia de Dados**  

---

### **Contexto e Objetivo da Aula**  
A aula avan√ßa na orquestra√ß√£o de containers com Docker Compose, integrando um **banco de dados PostgreSQL** √† aplica√ß√£o. O objetivo √© entender como gerenciar servi√ßos interdependentes (app + banco) e resolver o problema de **persist√™ncia de dados** em containers ef√™meros.  

---

### **Principais Ensinamentos**  

#### **1. Configura√ß√£o do PostgreSQL no Docker Compose**  
- **Servi√ßo `db`**:  
  ```yaml  
  services:  
    db:  
      image: postgres:latest  
      container_name: postgres  
      ports:  
        - "5432:5432"  
      environment:  
        POSTGRES_USER: root  
        POSTGRES_PASSWORD: root  
        POSTGRES_DB: widget-server  
  ```  
  - **`image`**: Usa a imagem oficial do PostgreSQL (tag `latest`).  
  - **`ports`**: Exp√µe a porta padr√£o do PostgreSQL (`5432`).  
  - **`environment`**: Define usu√°rio, senha e nome do banco.  

- **Comunica√ß√£o entre containers**:  
  - A aplica√ß√£o (`app`) se conecta ao banco via nome do servi√ßo (`db`) e porta `5432`.  

#### **2. Containers Ef√™meros e o Problema de Persist√™ncia**  
- **Stateless vs. Stateful**:  
  - **Aplica√ß√£o**: Stateless (n√£o armazena dados localmente).  
  - **Banco de dados**: Stateful (depende de persist√™ncia).  
- **Problema**:  
  - Ao rodar `docker-compose down`, os containers s√£o removidos, **perdendo todos os dados** (ex: tabelas criadas).  
  - Motivo: Containers s√£o **ef√™meros** por padr√£o.  

#### **3. Introdu√ß√£o a Volumes**  
- **Solu√ß√£o para persist√™ncia**:  
  - **Volumes**: Armazenam dados fora do container, permitindo recupera√ß√£o ap√≥s reinicializa√ß√µes.  
  - Ser√° implementado na pr√≥xima aula com:  
    ```yaml  
    volumes:  
      - postgres-data:/var/lib/postgresql/data  
    ```  

#### **4. Comandos Pr√°ticos**  
- **Subir servi√ßos**:  
  ```bash  
  docker-compose up -d  
  ```  
- **Parar e remover containers**:  
  ```bash  
  docker-compose down  
  ```  
- **Ver logs**:  
  ```bash  
  docker logs <container_name>  
  ```  

---

### **Exemplo de Conex√£o ao Banco**  
- **Ferramenta**: Beekeeper Studio (interface para PostgreSQL).  
- **Configura√ß√£o**:  
  - Host: `localhost`  
  - Porta: `5432`  
  - Usu√°rio: `root`  
  - Senha: `root`  
  - Banco: `widget-server`  

---

### **Pr√≥ximos Passos**  
- **Persist√™ncia com Volumes**:  
  - Configurar volume para o PostgreSQL no `docker-compose.yml`.  
  - Garantir que dados sobrevivam a reinicializa√ß√µes.  
- **Desafio Sugerido**:  
  - Implementar conex√£o da aplica√ß√£o ao banco (ex: API REST com endpoints CRUD).  

---

### **Conclus√£o**  
O Docker Compose simplifica a orquestra√ß√£o de servi√ßos complexos, mas a **persist√™ncia de dados** exige aten√ß√£o. A pr√≥xima aula abordar√° volumes para resolver a efemeridade dos containers, garantindo que dados cr√≠ticos (como tabelas do PostgreSQL) n√£o sejam perdidos.  

**üöÄ Dica do Professor**: Use `docker-compose logs db` para depurar erros de inicializa√ß√£o do PostgreSQL. Para ambientes produtivos, considere servi√ßos gerenciados (ex: Amazon RDS) em vez de containers autogerenciados.