**Resumo da Aula: Configura√ß√£o de CI/CD para Docker Hub e AWS ECR com GitHub Actions**  

---

### **Contexto**  
A aula demonstra como configurar pipelines CI/CD no GitHub Actions para enviar imagens Docker tanto para o **AWS ECR** quanto para o **Docker Hub**. O foco √© automatizar o processo de build, tag e push de imagens, garantindo seguran√ßa, escalabilidade e boas pr√°ticas.  

---

### **Principais Pontos**  

#### **1. Estrutura do Workflow no GitHub Actions**  
- **Arquivos Separados**:  
  - Crie workflows distintos para AWS ECR (`ecr.yml`) e Docker Hub (`dockerhub.yml`) para facilitar a manuten√ß√£o.  
- **Gatilhos**:  
  - Disparados por `push` na branch `main`.  

#### **2. Configura√ß√£o para AWS ECR**  
- **Autentica√ß√£o Segura**:  
  - Use **GitHub Secrets** para armazenar:  
    - `AWS_ACCESS_KEY_ID`  
    - `AWS_SECRET_ACCESS_KEY`  
    - `ECR_REGISTRY` (URI do ECR).  
- **Tags Din√¢micas**:  
  - Utilize o hash do commit (`${{ github.sha }}`) para garantir tags √∫nicas e imut√°veis.  
- **Passos Principais**:  
  ```yaml  
  - name: Login to AWS ECR  
    run: |  
      aws ecr get-login-password --region us-east-2 | docker login --username AWS --password-stdin $ECR_REGISTRY  
    env:  
      ECR_REGISTRY: ${{ secrets.ECR_REGISTRY }}  
  - name: Build and Push  
    run: |  
      docker build -t $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG .  
      docker push $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG  
  ```  

#### **3. Configura√ß√£o para Docker Hub**  
- **Autentica√ß√£o com Token**:  
  - Crie um **Personal Access Token** no Docker Hub (permiss√£o *Read/Write*).  
  - Armazene o token e o username como **GitHub Secrets**:  
    - `DOCKERHUB_USERNAME`  
    - `DOCKERHUB_TOKEN`.  
- **Workflow Simplificado**:  
  ```yaml  
  - name: Login to Docker Hub  
    uses: docker/login-action@v3  
    with:  
      username: ${{ secrets.DOCKERHUB_USERNAME }}  
      password: ${{ secrets.DOCKERHUB_TOKEN }}  
  - name: Build and Push  
    run: |  
      docker build -t $DOCKERHUB_USERNAME/$REPOSITORY_NAME:$IMAGE_TAG .  
      docker push $DOCKERHUB_USERNAME/$REPOSITORY_NAME:$IMAGE_TAG  
  ```  

#### **4. Boas Pr√°ticas Comuns**  
- **Vari√°veis de Ambiente**:  
  - Use `${{ github.repository }}` para evitar hardcode do nome do reposit√≥rio.  
- **Seguran√ßa**:  
  - Nunca exponha credenciais no c√≥digo (sempre use *secrets*).  
- **Imutabilidade**:  
  - Tags baseadas no commit SHA evitam conflitos e garantem rastreabilidade.  

---

üëâ **Dica do Instrutor**:  
*"Um pipeline CI/CD bem configurado √© como um rob√¥ de cozinha: faz o trabalho pesado sem sujar as m√£os. Automatize tudo, mas nunca deixe as credenciais √† vista!"* ü§ñ  

---

### **Pr√≥ximos Passos**  
1. **Deploy Autom√°tico**:  
   - Integre o ECR a servi√ßos AWS como **ECS** ou **AppRunner** para deploy autom√°tico.  
2. **Testes e Scans**:  
   - Adicione etapas de testes unit√°rios e scans de seguran√ßa (ex: Trivy) ao workflow.  
3. **Cache de Builds**:  
   - Use `docker/build-push-action` para cache de layers e builds mais r√°pidos.  

---

**Conclus√£o**:  
Configurar pipelines para AWS ECR e Docker Hub no GitHub Actions garante entregas √°geis e seguras. Com autentica√ß√£o via secrets, tags din√¢micas e workflows modularizados, voc√™ elimina tarefas manuais e reduz riscos de erros. Agora, cada commit gera uma nova vers√£o da imagem, pronta para produ√ß√£o! üöÄ