**Resumo da Aula: Seguran√ßa em Containers e Varredura de Vulnerabilidades**  

---

### **1. Execu√ß√£o Segura sem Root**  
- **Problema**: Containers executando como `root` aumentam riscos de seguran√ßa.  
- **Solu√ß√£o**: Use um usu√°rio n√£o-root (ex: `node` ou `user 1000`).  
  ```dockerfile  
  USER node  # Define o usu√°rio como "node" (n√£o-root)  
  ```  
- **Como verificar**:  
  ```bash  
  docker exec -it <container_id> whoami  # Exibe o usu√°rio atual (deve ser "node")  
  ```  

---

### **2. Vulnerabilidades em Imagens**  
- **O que s√£o?**  
  - Falhas em pacotes ou configura√ß√µes que podem ser exploradas por ataques.  
  - Classificadas como **Critical**, **High**, **Medium** ou **Low**.  

- **Exemplo no Docker Hub**:  
  - Imagens como `node:20-bookworm` podem ter centenas de vulnerabilidades.  
  - Imagens leves (ex: `node:20-alpine`) reduzem riscos (1 vulnerabilidade no exemplo).  

---

### **3. Varredura de Vulnerabilidades com Trivy**  
- **Ferramenta**: `Trivy` (open source) para escanear imagens localmente ou em pipelines.  
- **Instala√ß√£o**:  
  ```bash  
  # Mac (via Homebrew)  
  brew install aquasecurity/trivy/trivy  

  # Linux  
  curl -sfL https://raw.githubusercontent.com/aquasecurity/trivy/main/contrib/install.sh | sh  
  ```  

- **Uso**:  
  ```bash  
  trivy image <nome_da_imagem>  # Ex: trivy image node:20-bookworm  
  ```  
  **Exemplo de Sa√≠da**:  
  ```text  
  TOTAL: 158 (CRITICAL: 5, HIGH: 32, MEDIUM: 80, LOW: 41)  
  ```  

- **Detalhes de uma CVE**:  
  - **Exemplo**: `CVE-2023-1234` (vulnerabilidade em `cross-spawn`).  
  - **Como corrigir**: Atualize o pacote para a vers√£o recomendada (ex: `cross-spawn@7.0.5`).  

---

### **4. Boas Pr√°ticas de Seguran√ßa**  
1. **N√£o execute como root**: Sempre defina um usu√°rio n√£o-root no `Dockerfile`.  
2. **Use imagens oficiais e atualizadas**: Prefira vers√µes Alpine ou Slim.  
3. **Monitore vulnerabilidades**:  
   - Integre `Trivy` em pipelines CI/CD.  
   - Consulte o [CVE MITRE](https://cve.mitre.org/) para detalhes de vulnerabilidades.  

---

### **5. Exemplo Pr√°tico**  
- **Verificar vulnerabilidades na sua imagem**:  
  ```bash  
  trivy image widget-server:v1  # Substitua pelo nome da sua imagem  
  ```  

---

**Por Que Isso Importa?**  
- **Redu√ß√£o de Riscos**: Menos vulnerabilidades = menor chance de ataques.  
- **Conformidade**: Atenda a padr√µes de seguran√ßa (ex: GDPR, PCI-DSS).  
- **Efici√™ncia**: Imagens seguras evitam retrabalho e downtime.  

üëâ **Dica do Instrutor**:  
*"Seguran√ßa n√£o √© um recurso, √© uma obriga√ß√£o. Escaneie suas imagens como escova os dentes: todo dia!"* üîí  

**Pr√≥xima Aula**: **Imagens Distroless** (containers sem sistema operacional completo)! üöÄ